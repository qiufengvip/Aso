<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>Hello MUI</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">

		<link rel="stylesheet" href="../css/mui.css">
		<!-- <link rel="stylesheet" type="text/css" href="./css/hot.css"/> -->
		<script src="../js/dynamiclist.js" type="text/javascript" charset="utf-8"></script>
		<link rel="stylesheet" type="text/css" href="./css/Topic.css" />
		<link rel="stylesheet" type="text/css" href="css/xiaonei.css" />

		<script src="../login/js/windows.js" type="text/javascript" charset="utf-8"></script>

		<script src="../login/js/windows.js" type="text/javascript" charset="utf-8"></script>

		<style>
			html,
			body {
				background-color: #efeff4;
			}

			.mui-bar~.mui-content .mui-fullscreen {
				top: 44px;
				height: auto;
			}

			.mui-pull-top-tips {
				position: absolute;
				top: -20px;
				left: 50%;
				margin-left: -25px;
				width: 40px;
				height: 40px;
				border-radius: 100%;
				z-index: 1;
			}

			.mui-bar~.mui-pull-top-tips {
				top: 24px;
			}

			.mui-pull-top-wrapper {
				width: 42px;
				height: 42px;
				display: block;
				text-align: center;
				background-color: #efeff4;
				border: 1px solid #ddd;
				border-radius: 25px;
				background-clip: padding-box;
				box-shadow: 0 4px 10px #bbb;
				overflow: hidden;
			}

			.mui-pull-top-tips.mui-transitioning {
				-webkit-transition-duration: 200ms;
				transition-duration: 200ms;
			}

			.mui-pull-top-tips .mui-pull-loading {
				/*-webkit-backface-visibility: hidden;
				-webkit-transition-duration: 400ms;
				transition-duration: 400ms;*/

				margin: 0;
			}

			.mui-pull-top-wrapper .mui-icon,
			.mui-pull-top-wrapper .mui-spinner {
				margin-top: 7px;
			}

			.mui-pull-top-wrapper .mui-icon.mui-reverse {
				/*-webkit-transform: rotate(180deg) translateZ(0);*/
			}

			.mui-pull-bottom-tips {
				text-align: center;
				background-color: #efeff4;
				font-size: 15px;
				line-height: 40px;
				color: #777;
			}

			.mui-pull-top-canvas {
				overflow: hidden;
				background-color: #fafafa;
				border-radius: 40px;
				box-shadow: 0 4px 10px #bbb;
				width: 40px;
				height: 40px;
				margin: 0 auto;
			}

			.mui-pull-top-canvas canvas {
				width: 40px;
			}

			.mui-slider-indicator.mui-segmented-control {
				background-color: #efeff4;
			}
		</style>
	</head>

	<body>
		<!-- <header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">选项卡切换+下拉刷新（div模式）</h1>
		</header> -->




		<div class="mui-content">
			<div id="slider" class="mui-slider mui-fullscreen">
				<div class="qsub-top" id="">
					<div id="sliderSegmentedControl" style="width: 90%;" class="mui-scroll-wrapper mui-slider-indicator mui-segmented-control mui-segmented-control-inverted">
						<div class="mui-scroll">
							<a class="mui-control-item mui-active" href="#item1mobile">
								推荐
							</a>
							<a class="mui-control-item" href="#item2mobile">
								关注
							</a>
							<a class="mui-control-item" href="#item3mobile">
								招聘
							</a>
							<a class="mui-control-item" href="#item4mobile">
								就业经验
							</a>
							<a class="mui-control-item" href="#item5mobile">
								阿萨德
							</a>
							<a class="mui-control-item" href="#item6mobile">
								科技
							</a>
						</div>
					</div>

					<div class="qsub-top-ss" id="qsub-top-ss">
						<svg t="1608556250474" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3182"
						 width="128" height="128">
							<path d="M996.352 860.16c17.408 17.408 27.648 40.96 27.648 67.584 0 53.248-43.008 96.256-96.256 96.256-26.624 0-50.176-10.24-67.584-27.648l-281.6-281.6C521.216 748.544 454.656 768 384 768 172.032 768 0 595.968 0 384S172.032 0 384 0s384 172.032 384 384c0 71.68-19.456 137.216-53.248 194.56l281.6 281.6zM384 96.256C225.28 96.256 96.256 225.28 96.256 384c0 158.72 129.024 287.744 287.744 287.744 158.72 0 287.744-129.024 287.744-287.744C671.744 225.28 542.72 96.256 384 96.256z"
							 fill="#6964FF" p-id="3183"></path>
						</svg>
					</div>
				</div>



				<div class="mui-slider-group">
					<div id="item1mobile" class="mui-slider-item mui-control-content mui-active">
						<div id="scroll1" class="mui-scroll-wrapper">
							<div class="mui-scroll">
								<ul class="mui-table-view" id="list-view">
									<li class="mui-table-view-cell">
										<div class="topic-test">
											<div class="topic-test-top"><img class="topic-test-top-img" src="./img/x18.png"><span class="topic-test-top-span">秋枫&lt;br&gt;</span></div>
											<div class="topic-test-content">
												<div class="topic-test-content-text">本条没赋予事件</div>
												<img class="topic-test-content-img" src="../img/shengri.jpg">
											</div>
											<div class="topic-test-bottom">
												<div class="topic-test-bottom-left">表白</div>
												<div class="topic-test-bottom-img">
													<div class="topic-test-bottom-img-nr">
													
														<svg t="1608599593239" class="icon" viewBox="0 0 1024 1024" version="1.1"
														 xmlns="http://www.w3.org/2000/svg" p-id="6449">
															<path d="M677.51936 192.03072c113.1008 0 204.8 91.6992 204.8 204.77952 0 186.91072-370.3296 435.15904-370.3296 435.15904S141.68064 592.67072 141.68064 396.81024c0-140.78976 91.6992-204.77952 204.77952-204.77952 68.11648 0 128.28672 33.40288 165.5296 84.55168C549.24288 225.4336 609.41312 192.03072 677.51936 192.03072z"
															 p-id="6450"></path>
														</svg>
														<div id="">
															200
														</div>
													</div>
													<div class="topic-test-bottom-img-nr">
														
														<svg t="1608599744819" class="icon" viewBox="0 0 1024 1024" version="1.1"
														 xmlns="http://www.w3.org/2000/svg" p-id="7359">
															<path d="M512 799.44c-24.12586667 0-48.2816-2.19413333-71.33546667-6.58453333l-167.84 102.048v-168.96c-87.7888-61.45386667-143.712-155.792-143.712-261.12106667 0-185.41226667 171.1232-335.72693333 382.8864-335.72693333 211.73013333 0 382.88533333 150.31466667 382.88533334 335.72693333S723.72906667 799.44 512 799.44z m0-622.0608c-185.42826667 0-335.7408 128.36693333-335.7408 287.44426667 0 97.6384 57.06133333 183.21493333 142.64 234.78186666V811.52l113.01973333-68.02133333c26.30186667 5.48053333 52.64213333 8.7616 81.18506667 8.7616 185.39946667 0 335.712-128.36693333 335.712-287.43786667C847.7056 305.74506667 697.39413333 177.3792 512 177.3792z m167.8368 263.30026667H344.12906667c-13.16693333 0-24.12693333-10.976-24.12693334-24.12693334 0-13.16693333 10.95893333-24.13866667 24.128-24.13866666h335.70666667c13.20213333 0 24.16106667 10.9728 24.16106667 24.13866666-0.00106667 13.152-10.96 24.128-24.16 24.128z m-287.42613333 95.44533333h239.17546666c13.168 0 24.12586667 10.98986667 24.12586667 24.14186667 0 13.16906667-10.9568 24.1408-24.12586667 24.1408H392.41066667c-13.1648 0-24.1248-10.97173333-24.1248-24.1408 0-13.152 10.96106667-24.14293333 24.1248-24.14293334z m0 0"
															 p-id="7360"></path>
														</svg>
														<div id="">
															200
														</div>
														
													</div>
													<div class="topic-test-bottom-img-nr">
														
														<svg t="1608599855472" class="icon" viewBox="0 0 1024 1024" version="1.1"
														 xmlns="http://www.w3.org/2000/svg" p-id="8275">
															<path d="M71.9 909.8c-2.2 8.4-12.5 5.9-11.9-2.9 13.1-187 71.1-284.1 128.1-352.8C274.7 449.9 469.8 352.7 604 341.3c10.6-0.9 18.9-11.7 18.9-24.8V157.9c0-21.7 21.1-32.9 34.1-18.2l299.5 339.5c9 10.2 8.6 27.6-0.8 37.2L662 817.6c-13.2 13.5-33.3 2-33.3-19V604.3c0-12.9-8.1-23.7-18.6-24.7-85.7-8.5-287.5 10.3-369.1 70.2-34.8 25.4-129.8 112.4-169.1 260z"
															 p-id="8276"></path>
														</svg>
														<div id="">
															200
														</div>
													</div>
												</div>
											</div>
										</div>

									</li>
								</ul>
							</div>
						</div>
					</div>
					<div id="item2mobile" class="mui-slider-item mui-control-content">
						<div class="mui-scroll-wrapper">
							<div class="mui-scroll">
								<ul class="mui-table-view">

								</ul>
							</div>
						</div>
					</div>
					<div id="item3mobile" class="mui-slider-item mui-control-content">
						<div class="mui-scroll-wrapper">
							<div class="mui-scroll">
								<ul class="mui-table-view">

								</ul>
							</div>
						</div>
					</div>
					<div id="item4mobile" class="mui-slider-item mui-control-content">
						<div class="mui-scroll-wrapper">
							<div class="mui-scroll">
								<ul class="mui-table-view">

								</ul>
							</div>
						</div>
					</div>
					<div id="item5mobile" class="mui-slider-item mui-control-content">
						<div class="mui-scroll-wrapper">
							<div class="mui-scroll">
								<ul class="mui-table-view">

								</ul>
							</div>
						</div>
					</div>
					<div id="item6mobile" class="mui-slider-item mui-control-content">
						<div class="mui-scroll-wrapper">
							<div class="mui-scroll">
								<ul class="mui-table-view">

								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>


		</div>
		<script src="../js/mui.min.js"></script>
		<script src="js/mui.pullToRefresh.js"></script>
		<script src="js/mui.pullToRefresh.material.js"></script>
		<script>
			// mui.init();
			mui.init({
				swipeBack: false,
				pullRefresh: {
					container: '#slider'
				},
				styles: {
					top: 0, //内容页面顶部位置,需根据实际页面布局计算，若使用标准mui导航，顶部默认为48px；
				}
			});


			//选项卡切换面板监听器
			document.getElementById('slider').addEventListener('slide', function(e) {
				console.log(e.detail.slideNumber);
				if (e.detail.slideNumber === 0) {
					//
				} else {
					//篮球

				}
			});
			
			
			(function($) {
				//阻尼系数
				var deceleration = mui.os.ios ? 0.003 : 0.0009;
				$('.mui-scroll-wrapper').scroll({
					bounce: true,
					indicators: true, //是否显示滚动条
					deceleration: deceleration
				});

				$.ready(function(){
					//循环初始化所有下拉刷新，上拉加载。
					$.each(document.querySelectorAll('.mui-slider-group .mui-scroll'), function(index, pullRefreshEl) {
						$(pullRefreshEl).pullToRefresh({
							down: {
								callback: function() {
									var self = this;
									setTimeout(function() {
										var ul = self.element.querySelector('.mui-table-view');
										ul.insertBefore(createFragment(ul, index, 1, true), ul.firstChild);
										self.endPullDownToRefresh();
										// tovideo();
									}, 1000);
								}
							},
							up: {
								callback: function() {
									var self = this;
									setTimeout(function() {
										var ul = self.element.querySelector('.mui-table-view');
										ul.appendChild(createFragment(ul, index, 5));
										self.endPullUpToRefresh();
										// tovideo();
									}, 1000);
								}
							}
						});
					});

					var createFragment = function(ul, index, count, reverse) {
						var length = ul.querySelectorAll('li').length;
						var fragment = document.createDocumentFragment();
						var li;
						for (var i = 0; i < count; i++) {
							li = document.createElement('li');
							li.className = 'mui-table-view-cell';
							li.appendChild(dynamiclist("./img/x18.png", "秋枫<br>", "我发布的第" + (length + (reverse ? (count - i) : (i + 1))) +
								"条说说", "表白"));
							fragment.appendChild(li);
							// li.onclick = function() {
							// 	// show(certid.value,i);
							// 	//var tezst = "这是" +(length + (reverse ? (count - i) : (i + 1)));

							// 	newWebview("postdetails.html", "postdetails");
							// 	//mui.toast(tezst);
							// };
						}
						return fragment;
					};
				});
			})(mui);


			// mui-table-view

			var x = document.getElementsByClassName('mui-table-view');
			var i;
			console.log(x.length);
			for (i = 0; i < x.length; i++) {
				console.log(i);
				x[i].appendChild(
					createFragment01(x[i], i, 5));
			}








			//document.getElementsByClassName('mui-table-view')[0].appendChild(createFragment01( document.getElementsByClassName('mui-table-view')[0], index, 5));
			function createFragment01(ul, index, count, reverse) {
				var length = ul.querySelectorAll('li').length;
				var fragment = document.createDocumentFragment();
				var li;
				for (var i = 0; i < count; i++) {
					li = document.createElement('li');
					li.className = 'mui-table-view-cell';
					console.log();
					li.appendChild(
					dynamiclist(
						"./img/x18.png",
						"秋枫<br>", 
						"我发布的第" + (length + (reverse ? (count - i) : (i + 1))) +"条说说", 
						"表白",
						"../img/shengri.jpg",
						(length + (reverse ? (count - i) : (i + 1)))
					));
					fragment.appendChild(li);
					// li.onclick = function() {
					// 	// show(certid.value,i);
					// 	//var tezst = "这是" +(length + (reverse ? (count - i) : (i + 1)));

					// 	newWebview("postdetails.html", "postdetails");
					// 	//mui.toast(tezst);
					// };
				}
				return fragment;
			};











			// tovideo();
			// function tovideo(){
			// 	var listView = document.getElementById('list-view');
			// 	var listItem = document.getElementsByClassName('mui-table-view-cell');
			// 	//然后是写一个函数，也就是列表条目的点击事件。
			// 	var clickEvent = function(i) {
			// 		listItem[i].addEventListener('tap', function(event) {
			// 			console.log(i);
			// 			mui.toast(listItem[i].textContent);
			// 		});
			// 	}
			// 	//第三步就是用for循环，执行上面的clickEvent函数。for循环的循环次数就是列表的条目数量。
			// 	for(var i = 0; i < listView.childElementCount; i++) {
			// 		clickEvent(i);
			// 	}
			// }

			// qsub-top-ss

			// document.getElementById('qsub-top-ss').addEventListener('tap', function() { /*tap表示单击屏幕，此处可换双击，滑动等等事件*/
			// 	newWebview("../search/search-home.html", "search-home");
			// });
		</script>
	</body>

</html>
